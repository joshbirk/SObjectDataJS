/*!
 * SwipeView v1.0 ~ Copyright (c) 2012 Matteo Spinelli, http://cubiq.org
 * Released under MIT license, http://cubiq.org/license
 */
var SwipeView=(function(f,m){var k=m.createElement("div").style,r=(function(){var x="t,webkitT,MozT,msT,OT".split(","),w,v=0,u=x.length;
for(;v<u;v++){w=x[v]+"ransform";if(w in k){return x[v].substr(0,x[v].length-1);}}return false;})(),s=r?"-"+r.toLowerCase()+"-":"",j=n("transform"),i=n("transitionDuration"),h=n("perspective") in k,q="ontouchstart" in f,c=!!r,d=n("transition") in k,t=h?" translateZ(0)":"",g="onorientationchange" in f?"orientationchange":"resize",o=q?"touchstart":"mousedown",b=q?"touchmove":"mousemove",l=q?"touchend":"mouseup",p=q?"touchcancel":"mouseup",a=(function(){if(r===false){return false;
}var u={"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"oTransitionEnd",ms:"MSTransitionEnd"};return u[r];})(),e=function(y,v){var w,z,x,u;
this.wrapper=typeof y=="string"?m.querySelector(y):y;this.options={text:null,numberOfPages:3,snapThreshold:null,hastyPageFlip:false,loop:true};for(w in v){this.options[w]=v[w];
}this.wrapper.style.overflow="hidden";this.wrapper.style.position="relative";this.masterPages=[];z=m.createElement("div");z.id="swipeview-slider";z.style.cssText="position:relative;top:0;height:100%;width:100%;"+s+"transition-duration:0;"+s+"transform:translateZ(0);"+s+"transition-timing-function:ease-out";
this.wrapper.appendChild(z);this.slider=z;this.refreshSize();for(w=-1;w<2;w++){z=m.createElement("div");z.id="swipeview-masterpage-"+(w+1);z.style.cssText=s+"transform:translateZ(0);position:absolute;top:0;height:100%;width:100%;left:"+w*100+"%";
if(!z.dataset){z.dataset={};}u=w==-1?this.options.numberOfPages-1:w;z.dataset.pageIndex=u;z.dataset.upcomingPageIndex=u;if(!this.options.loop&&w==-1){z.style.visibility="hidden";
}this.slider.appendChild(z);this.masterPages.push(z);}x=this.masterPages[1].className;this.masterPages[1].className=!x?"swipeview-active":x+" swipeview-active";
f.addEventListener(g,this,false);this.wrapper.addEventListener(o,this,false);this.wrapper.addEventListener(b,this,false);this.wrapper.addEventListener(l,this,false);
this.slider.addEventListener(a,this,false);if(r=="O"){this.slider.addEventListener(a.toLowerCase(),this,false);}};e.prototype={currentMasterPage:1,x:0,page:0,pageIndex:0,customEvents:[],onFlip:function(u){this.wrapper.addEventListener("swipeview-flip",u,false);
this.customEvents.push(["flip",u]);},onMoveOut:function(u){this.wrapper.addEventListener("swipeview-moveout",u,false);this.customEvents.push(["moveout",u]);
},onMoveIn:function(u){this.wrapper.addEventListener("swipeview-movein",u,false);this.customEvents.push(["movein",u]);},onTouchStart:function(u){this.wrapper.addEventListener("swipeview-touchstart",u,false);
this.customEvents.push(["touchstart",u]);},destroy:function(){while(this.customEvents.length){this.wrapper.removeEventListener("swipeview-"+this.customEvents[0][0],this.customEvents[0][1],false);
this.customEvents.shift();}f.removeEventListener(g,this,false);this.wrapper.removeEventListener(o,this,false);this.wrapper.removeEventListener(b,this,false);
this.wrapper.removeEventListener(l,this,false);this.slider.removeEventListener(a,this,false);},refreshSize:function(){var u=m.getElementById("app-content");
u.style.height=f.innerHeight+"px";this.wrapperWidth=this.wrapper.clientWidth;this.wrapperHeight=this.wrapper.clientHeight;this.pageWidth=this.wrapperWidth;
this.maxX=-this.options.numberOfPages*this.pageWidth+this.wrapperWidth;this.snapThreshold=this.options.snapThreshold===null?Math.round(this.pageWidth*0.15):/%/.test(this.options.snapThreshold)?Math.round(this.pageWidth*this.options.snapThreshold.replace("%","")/100):this.options.snapThreshold;
},updatePageCount:function(u){this.options.numberOfPages=u;this.maxX=-this.options.numberOfPages*this.pageWidth+this.wrapperWidth;},goToPage:function(v){var u;
this.masterPages[this.currentMasterPage].className=this.masterPages[this.currentMasterPage].className.replace(/(^|\s)swipeview-active(\s|$)/,"");for(u=0;
u<3;u++){className=this.masterPages[u].className;/(^|\s)swipeview-loading(\s|$)/.test(className)||(this.masterPages[u].className=!className?"swipeview-loading":className+" swipeview-loading");
}v=v<0?0:v>this.options.numberOfPages-1?this.options.numberOfPages-1:v;this.page=v;this.pageIndex=v;this.slider.style[i]="0s";this.__pos(-v*this.pageWidth);
this.currentMasterPage=(this.page+1)-Math.floor((this.page+1)/3)*3;this.masterPages[this.currentMasterPage].className=this.masterPages[this.currentMasterPage].className+" swipeview-active";
if(this.currentMasterPage===0){this.masterPages[2].style.left=this.page*100-100+"%";this.masterPages[0].style.left=this.page*100+"%";this.masterPages[1].style.left=this.page*100+100+"%";
this.masterPages[2].dataset.upcomingPageIndex=this.page===0?this.options.numberOfPages-1:this.page-1;this.masterPages[0].dataset.upcomingPageIndex=this.page;
this.masterPages[1].dataset.upcomingPageIndex=this.page==this.options.numberOfPages-1?0:this.page+1;}else{if(this.currentMasterPage==1){this.masterPages[0].style.left=this.page*100-100+"%";
this.masterPages[1].style.left=this.page*100+"%";this.masterPages[2].style.left=this.page*100+100+"%";this.masterPages[0].dataset.upcomingPageIndex=this.page===0?this.options.numberOfPages-1:this.page-1;
this.masterPages[1].dataset.upcomingPageIndex=this.page;this.masterPages[2].dataset.upcomingPageIndex=this.page==this.options.numberOfPages-1?0:this.page+1;
}else{this.masterPages[1].style.left=this.page*100-100+"%";this.masterPages[2].style.left=this.page*100+"%";this.masterPages[0].style.left=this.page*100+100+"%";
this.masterPages[1].dataset.upcomingPageIndex=this.page===0?this.options.numberOfPages-1:this.page-1;this.masterPages[2].dataset.upcomingPageIndex=this.page;
this.masterPages[0].dataset.upcomingPageIndex=this.page==this.options.numberOfPages-1?0:this.page+1;}}this.__flip();},next:function(){if(!this.options.loop&&this.x==this.maxX){return;
}this.directionX=-1;this.x-=1;this.__checkPosition();},prev:function(){if(!this.options.loop&&this.x===0){return;}this.directionX=1;this.x+=1;this.__checkPosition();
},handleEvent:function(u){switch(u.type){case o:this.__start(u);break;case b:this.__move(u);break;case p:case l:this.__end(u);break;case g:this.__resize();
break;case a:case"otransitionend":if(u.target==this.slider&&!this.options.hastyPageFlip){this.__flip();}break;}},__pos:function(u){this.x=u;this.slider.style[j]="translate("+u+"px,0)"+t;
},__resize:function(){this.refreshSize();this.slider.style[i]="0s";this.__pos(-this.page*this.pageWidth);},__start:function(v){if(this.initiated){return;
}var u=q?v.touches[0]:v;this.initiated=true;this.moved=false;this.thresholdExceeded=false;this.startX=u.pageX;this.startY=u.pageY;this.pointX=u.pageX;this.pointY=u.pageY;
this.stepsX=0;this.stepsY=0;this.directionX=0;this.directionLocked=false;this.slider.style[i]="0s";this.__event("touchstart");},__move:function(x){if(!this.initiated){return;
}var v=q?x.touches[0]:x,w=v.pageX-this.pointX,u=v.pageY-this.pointY,z=this.x+w,y=Math.abs(v.pageX-this.startX);this.moved=true;this.pointX=v.pageX;this.pointY=v.pageY;
this.directionX=w>0?1:w<0?-1:0;this.stepsX+=Math.abs(w);this.stepsY+=Math.abs(u);if(this.stepsX<10&&this.stepsY<10){return;}if(!this.directionLocked&&this.stepsY>this.stepsX){this.initiated=false;
return;}x.preventDefault();this.directionLocked=true;if(!this.options.loop&&(z>0||z<this.maxX)){z=this.x+(w/2);}if(!this.thresholdExceeded&&y>=this.snapThreshold){this.thresholdExceeded=true;
this.__event("moveout");}else{if(this.thresholdExceeded&&y<this.snapThreshold){this.thresholdExceeded=false;this.__event("movein");}}this.__pos(z);},__end:function(v){if(!this.initiated){return;
}var u=q?v.changedTouches[0]:v,w=Math.abs(u.pageX-this.startX);this.initiated=false;if(!this.moved){return;}if(!this.options.loop&&(this.x>0||this.x<this.maxX)){w=0;
this.__event("movein");}if(w<this.snapThreshold){this.slider.style[i]=Math.floor(300*w/this.snapThreshold)+"ms";this.__pos(-this.page*this.pageWidth);return;
}this.__checkPosition();},__checkPosition:function(){var w,u,v;this.masterPages[this.currentMasterPage].className=this.masterPages[this.currentMasterPage].className.replace(/(^|\s)swipeview-active(\s|$)/,"");
if(this.directionX>0){this.page=-Math.ceil(this.x/this.pageWidth);this.currentMasterPage=(this.page+1)-Math.floor((this.page+1)/3)*3;this.pageIndex=this.pageIndex===0?this.options.numberOfPages-1:this.pageIndex-1;
w=this.currentMasterPage-1;w=w<0?2:w;this.masterPages[w].style.left=this.page*100-100+"%";u=this.page-1;}else{this.page=-Math.floor(this.x/this.pageWidth);
this.currentMasterPage=(this.page+1)-Math.floor((this.page+1)/3)*3;this.pageIndex=this.pageIndex==this.options.numberOfPages-1?0:this.pageIndex+1;w=this.currentMasterPage+1;
w=w>2?0:w;this.masterPages[w].style.left=this.page*100+100+"%";u=this.page+1;}v=this.masterPages[this.currentMasterPage].className;/(^|\s)swipeview-active(\s|$)/.test(v)||(this.masterPages[this.currentMasterPage].className=!v?"swipeview-active":v+" swipeview-active");
v=this.masterPages[w].className;/(^|\s)swipeview-loading(\s|$)/.test(v)||(this.masterPages[w].className=!v?"swipeview-loading":v+" swipeview-loading");
u=u-Math.floor(u/this.options.numberOfPages)*this.options.numberOfPages;this.masterPages[w].dataset.upcomingPageIndex=u;newX=-this.page*this.pageWidth;
this.slider.style[i]=Math.floor(500*Math.abs(this.x-newX)/this.pageWidth)+"ms";if(!this.options.loop){this.masterPages[w].style.visibility=newX===0||newX==this.maxX?"hidden":"";
}if(this.x==newX){this.__flip();}else{this.__pos(newX);if(this.options.hastyPageFlip){this.__flip();}}},__flip:function(){this.__event("flip");for(var u=0;
u<3;u++){this.masterPages[u].className=this.masterPages[u].className.replace(/(^|\s)swipeview-loading(\s|$)/,"");this.masterPages[u].dataset.pageIndex=this.masterPages[u].dataset.upcomingPageIndex;
}},__event:function(u){var v=m.createEvent("Event");v.initEvent("swipeview-"+u,true,true);this.wrapper.dispatchEvent(v);}};function n(u){if(r===""){return u;
}u=u.charAt(0).toUpperCase()+u.substr(1);return r+u;}return e;})(window,document);